jQuery(document).ready(function(a){function b(){if("readonly"!==a('.ppc-roles-tab-content input[name="role_slug"]').attr("readonly")){var c=a('.ppc-roles-tab-content input[name="role_slug"]').val(),b=a("#pp-role-slug-exists"),d=a(".ppc-roles-all-roles").val(),e=d.split(",");e.includes(c)?b.show():b.hide()}}a("a.neg-cap").attr("title",cmeAdmin.negationCaption),a("a.neg-type-caps").attr("title",cmeAdmin.typeCapsNegationCaption),a("td.cap-unreg").attr("title",cmeAdmin.typeCapUnregistered),a("a.normal-cap").attr("title",cmeAdmin.switchableCaption),a("span.cap-x").attr("title",cmeAdmin.capNegated),a('table.cme-checklist input[class!="cme-check-all"]').not(":disabled").attr("title",cmeAdmin.chkCaption),a("table.cme-checklist a.neg-cap").click(function(c){a(this).closest("td").removeClass("cap-yes").removeClass("cap-no").addClass("cap-neg");var b=a(this).parent().find('input[type="checkbox"]').attr("name");return a(this).after('<input type="hidden" class="cme-negation-input" name="'+b+'" value="" />'),a('input[name="'+b+'"]').closest("td").removeClass("cap-yes").removeClass("cap-no").addClass("cap-neg"),!1}),a(document).on("click","table.cme-typecaps span.cap-x,table.cme-checklist span.cap-x,table.cme-checklist td.cap-neg span",function(c){a(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a(this).parent().find('input[type="checkbox"]').prop("checked",!1),a(this).parent().find("input.cme-negation-input").remove();var b=a(this).next('input[type="checkbox"]').attr("name");return b||(b=a(this).next("label").find('input[type="checkbox"]').attr("name")),a('input[name="'+b+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a('input[name="'+b+'"]').prop("checked",!1).parent().find("input.cme-negation-input").remove(),!1}),a("#publishpress_caps_form").bind("keypress",function(b){if(13==b.keyCode)return a(document.activeElement).parent().find('input[type="submit"]').first().click(),!1}),a("input.cme-check-all").click(function(b){a(this).closest("table").find('input[type="checkbox"][disabled!="disabled"]:visible').prop("checked",a(this).is(":checked"))}),a("a.cme-neg-all").click(function(b){return a(this).closest("table").find("a.neg-cap:visible").click(),!1}),a("a.cme-switch-all").click(function(b){return a(this).closest("table").find("td.cap-neg span").click(),!1}),a("table.cme-typecaps a.neg-type-caps").click(function(b){return a(this).closest("tr").find('td[class!="cap-neg"]').filter('td[class!="cap-unreg"]').each(function(){a(this).addClass("cap-neg");var b=a(this).find('input[type="checkbox"]').attr("name");a(this).append('<input type="hidden" class="cme-negation-input" name="'+b+'" value="" />'),a('input[name="'+b+'"]').parent().next("a.neg-cap:visible").click()}),!1}),a("table.cme-typecaps th").click(function(){var c=a(this).index(),d=!a(this).prop("checked_all");if(a(this).hasClass("term-cap"))var b='[class*="term-cap"]';else var b='[class*="post-cap"]';var e=a(this).closest("table").find("tr td"+b+":nth-child("+(c+1)+') input[type="checkbox"]:visible');a(e).each(function(b,c){a('input[name="'+a(this).attr("name")+'"]').prop("checked",d)}),a(this).prop("checked_all",d)}),a("a.cme-fix-read-cap").click(function(){return a('input[name="caps[read]"]').prop("checked",!0),a('input[name="SaveRole"]').trigger("click"),!1}),a(".ppc-filter-select").each(function(){var c=a(this),b=new Array;a(this).parent().siblings("table").find("tbody").find("tr").each(function(){b.push({value:a(this).attr("class"),text:a(this).find(".cap_type").text()})}),b.forEach(function(b,d){c.append(a("<option>",{value:b.value,text:b.text}))})}),a(".ppc-filter-select").prop("selectedIndex",0),a(".ppc-filter-select-reset").click(function(){a(this).prev(".ppc-filter-select").prop("selectedIndex",0),a(this).parent().siblings("table").find("tr").show()}),a(".ppc-filter-select").change(function(){a(this).val()?(a(this).parent().siblings("table").find("tr").hide(),a(this).parent().siblings("table").find("thead tr:first-child").show(),a(this).parent().siblings("table").find("tr."+a(this).val()).show()):a(this).parent().siblings("table").find("tr").show()}),a(".ppc-filter-text").val(""),a(".ppc-filter-text-reset").click(function(){a(this).prev(".ppc-filter-text").val(""),a(this).parent().siblings("table").find("tr").show(),a(this).parent().siblings(".ppc-filter-no-results").hide()}),a(".ppc-filter-text").keyup(function(){var b=a(this).val().trim().replace(/\s+/g,"_");a(this).parent().siblings("table").find("tr").hide(),a(this).parent().siblings("table").find('tr[class*="'+b+'"]').show(),a(this).parent().siblings("table").find("tr.cme-bulk-select").hide(),0===a(this).val().length&&a(this).parent().siblings("table").find("tr").show(),0===a(this).parent().siblings("table").find("tr:visible").length?a(this).parent().siblings(".ppc-filter-no-results").show():a(this).parent().siblings(".ppc-filter-no-results").hide()}),a(document).on("click",".ppc-roles-tab li",function(b){b.preventDefault();var c=a(this).attr("data-tab");a(".ppc-roles-tab li").removeClass("active"),a(this).addClass("active"),a(".pp-roles-tab-tr").hide(),a(".pp-roles-"+c+"-tab").show()}),a(document).on("click",".roles-capabilities-load-more",function(b){b.preventDefault(),a(".roles-capabilities-load-more").hide(),a(".roles-capabilities-load-less").show(),a("ul.pp-roles-capabilities li").show()}),a(document).on("click",".pp-row-action-rotate",function(c){c.preventDefault();let b=a(this);b.hasClass("rotate-blank")?(b.removeClass("rotate-x rotate-checkmark rotate-blank"),b.closest("tr").find('td[class!="cap-neg"]').filter('td[class!="cap-unreg"]').each(function(){a(this).addClass("cap-neg");var b=a(this).find('input[type="checkbox"]').attr("name");a(this).append('<input type="hidden" class="cme-negation-input" name="'+b+'" value="" />'),a('input[name="'+b+'"]').parent().next("a.neg-cap:visible").click()}),b.addClass("rotate-x")):a(this).hasClass("rotate-x")?(a(this).removeClass("rotate-x rotate-checkmark rotate-blank"),b.closest("tr").find("td").filter('td[class!="cap-unreg"]').each(function(){a(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a(this).parent().find('input[type="checkbox"]').prop("checked",!0),a(this).parent().find("input.cme-negation-input").remove();var b=a(this).next('input[type="checkbox"]').attr("name");b||(b=a(this).next("label").find('input[type="checkbox"]').attr("name")),a('input[name="'+b+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a('input[name="'+b+'"]').prop("checked",!1).parent().find("input.cme-negation-input").remove()}),b.addClass("rotate-checkmark")):a(this).hasClass("rotate-checkmark")&&(a(this).removeClass("rotate-x rotate-checkmark rotate-blank"),b.closest("tr").find("td").filter('td[class!="cap-unreg"]').each(function(){a(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a(this).parent().find('input[type="checkbox"]').prop("checked",!1),a(this).parent().find("input.cme-negation-input").remove();var b=a(this).next('input[type="checkbox"]').attr("name");b||(b=a(this).next("label").find('input[type="checkbox"]').attr("name")),a('input[name="'+b+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),a('input[name="'+b+'"]').prop("checked",!1).parent().find("input.cme-negation-input").remove()}),b.addClass("rotate-blank"))}),a(document).on("click",".roles-capabilities-load-less",function(b){b.preventDefault(),a(".roles-capabilities-load-less").hide(),a(".roles-capabilities-load-more").show(),a("ul.pp-roles-capabilities li").hide(),a("ul.pp-roles-capabilities").children().slice(0,6).show(),window.scrollTo({top:0,behavior:"smooth"})}),a('.ppc-roles-tab-content input[name="role_slug"]').on("keyup",function(a){b()}),a("#pp-role-slug-exists").length>0&&b()})